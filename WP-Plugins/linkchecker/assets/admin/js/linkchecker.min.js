!function(t){var e=!1,i=[],s=0,n=0,o=t("#post-status-display"),l=t("#publish"),a=t("#publishing-action .spinner"),r=t("#publishing-action"),c=t("#save-post"),d=null;var h,u=(h={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,e,i){h[e]=i}),h).delay;d=null==u?4e3:isNaN(u)?4e3:u;lc=new function(h){return{init:function(){l.on("click",lc.publish),c&&c.on("click",lc.draft),t(document).on("click","#publish-anyway",lc.publishPost),t(document).on("click",".scroll-to-error",lc.scrollToError),t(document).on("click","#save-draft-no-warning",lc.publishDraft),lc.checkCookie()},publish:function(t){var e=o.text();saveDraftButton=document.getElementById("save-post"),("Draft"!==e||saveDraftButton)&&(t.preventDefault(),lc.handleSubmit("publish")),saveDraftButton=null},draft:function(t){t.preventDefault(),lc.handleSubmit("draft")},publishPost:function(){setTimeout(function(){l.off("click",lc.publish),l.removeClass("disabled"),l.trigger("click.edit-post")},d)},publishDraft:function(){setTimeout(function(){c.off("click",lc.draft),c.removeClass("disabled"),c.click()},d)},handleSubmit:function(i){if(!e){e=!0,l.addClass("disabled"),a.hide(),r.append('<div id="link-checker-spinner"></div>');var s,o,c,d,h=document.querySelector("#content_ifr"),u=document.querySelector("#content"),f=window.location.protocol+"//"+window.location.hostname,p=[],b=[],v=[],m=/\[(.*?)\]/gm,k=[],y=[];if(h){if(o=(s=h.contentDocument||h.contentWindow.document).querySelectorAll("#tinymce"),!s)throw"iframe couldn't be found in DOM.";for(iFrameContents=lc.stringToHTML(o[0].innerHTML),c=iFrameContents.getElementsByTagName("a");null!=(d=m.exec(iFrameContents.innerHTML));)d[0].includes("[button")&&(d[0].match(/href="([^"]*)/)?_=d[0].match(/href="([^"]*)/)[1]:d[0].match(/href=\'([^\']*)/)&&(_=d[0].match(/href=\'([^\']*)/)[1]),k.push(["Button Shortcode ",_,"#wp-content-editor-tools",""]))}else{var g=lc.stringToHTML(u.value);for(c=g.getElementsByTagName("a");null!=(d=m.exec(g.innerHTML));){var _;console.log(d),d[0].includes("[button")&&(d[0].match(/href="([^"]*)/)?_=d[0].match(/href="([^"]*)/)[1]:d[0].match(/href='([^\']*)/)&&(_=d[0].match(/href='([^\']*)/)[1]),k.push(["Button Shortcode ",_,"#wp-content-editor-tools",""]))}}if(document.querySelector(".enable_button").checked){t(".data_list_items").children(".postbox").each(function(e){t(this).removeClass("closed");var i=e,s=e+1;if(lc.listPostType(t(this),".type_standard_list_fields"))t(this).find(".type_standard_list_fields").each(function(){var e;t(this).find("input[type='text']").each(function(e,n){var o,l;2!==e&&4!==e&&6!==e||""!=t(this).val()&&(2===e&&(t(this).addClass("list-post-title-url-"+i),l=".list-post-title-url-"+i,o="List Post Title Url"),4===e&&(t(this).addClass("list-post-subtitle-url-"+i),l=".list-post-subtitle-url-"+i,o="List Post Subtitle Url"),6===e&&(t(this).addClass("list-post-description-url-"+i),l=".list-post-description-url-"+i,o=" List Post Description Url"),y.push(["("+s+") "+o,t(this).val(),l,""]))});var n,o=t(this).find("iframe").contents().find("body").html(),l=lc.stringToHTML(o);if(t(this).find(".wp-editor-wrap").addClass("list-post-desc-iframe-"+i),void 0===o){var a=t(this).find("textarea").val();n=lc.stringToHTML(a).getElementsByTagName("a")}else n=l.getElementsByTagName("a");e=".list-post-desc-iframe-"+i,t(this).find(".media_video_field").each(function(e){var i=t(this).find("input");t(this).hasClass("hidden_impt")||i&&""!=i&&(i.addClass("video-share-url"),y.push(["("+s+") YouTube Share Url",i.val(),".video-share-url",""]))});for(var r=0;r<n.length;r++){var c=n[r].getAttribute("href"),d=n[r].textContent;""===d&&(d="No Label"),c&&(c.startsWith("#")||c.startsWith("app://")||""===c||c.includes("attachment_id")||(c.startsWith("/")?y.push(["("+s+") "+d,f+c,e," (List Post Description)"]):y.push(["("+s+") "+d,c,e," (List Post Description)"])))}t(this).find(".link_items").find(".link_field").each(function(e,i){var n=e;t(this).find("input[type='text']").each(function(e,i){if(1===e&&""!=t(this).val()){t(this).addClass("primary-list-post-link"+n);var o=".primary-list-post-link"+n;y.push(["("+s+") Primary List Post Link",t(this).val(),o,""])}})}),t(this).find(".secondary_link_items").find(".link_field").each(function(e,i){var n=e;t(this).find("input[type='text']").each(function(e,i){if(1===e&&""!=t(this).val()){t(this).addClass("secondary-list-post-link"+n);var o=".secondary-list-post-link"+n;y.push(["("+s+") Secondary List Post Link",t(this).val(),o,""])}})})});else if(lc.listPostType(t(this),".type_twitter_list_fields"))console.log("twitter is no longer supported in list posts");else if(lc.listPostType(t(this),".type_playlist_list_fields")){var n=e,o=e+1;t(this).find(".type_playlist_list_fields").each(function(e,i){t(this).find("input[type='text']").each(function(e,i){if((3===e||4===e)&&""!=t(this).val()){if(3===e){service="iTunes ",t(this).addClass("itunes-buy-list-post-"+n);var s=".itunes-buy-list-post-"+n}4===e&&(service="Amazon ",t(this).addClass("amazon-buy-list-post-"+n),s=".itunes-buy-list-post-"+n),y.push(["("+o+") "+service+"Buy Link ",t(this).val(),s,""])}})})}else lc.listPostType(t(this),".type_oembed_list_fields")&&console.log("oembed is no longer supported in list posts")});var w=t("#list_footer_link_url").val();if(""!=w&&y.push(["Footer Title URL",w,".sec-footer"]),document.getElementById("list_footer_content_ifr"))var C=t("#list_footer_content_ifr").contents().find("body").html(),T=lc.stringToHTML(C).getElementsByTagName("a");else T=lc.stringToHTML(t("#list_footer_content").val()).getElementsByTagName("a");for(var L=0;L<T.length;L++){var P=T[L].getAttribute("href"),D=T[L].textContent;""===D&&(D="No Label"),P&&(P.startsWith("#")||P.startsWith("app://")||""===P||P.includes("attachment_id")||(P.startsWith("/")?y.push([D,f+P,".sec-footer"," (List Post Footer Description)"]):y.push([D,P,".sec-footer"," (List Post Footer Description)"])))}t(".pagination_fields").find(".link_items").find(".link_field").each(function(e,i){t(this).find("input[type='text']").each(function(e,i){1===e&&""!=t(this).val()&&y.push(["Paginate Item Link",t(this).val(),".sec-pagination",""])})});var x=t("#list_network_link_url").val();""!=x&&y.push(["Network Button URL",x,"#list_network_link_url",""])}for(L=0;L<c.length;L++){var S=c[L].getAttribute("href"),W=c[L].textContent;""===W&&(W="No Label"),S&&(S.startsWith("#")||S.startsWith("app://")||""===S||S.includes("attachment_id")||(S.startsWith("/")?p.push([W,f+S,"#wp-content-editor-tools"," (Main Content)"]):p.push([W,S,"#wp-content-editor-tools"," (Main Content)"])))}for(var B=0;B<k.length;B++){var N=k[B][0],E=k[B][1];""===N&&(N="No Label"),E&&(E.startsWith("#")||E.startsWith("app://")||""===E||(E.startsWith("/")?b.push([N,f+E,"#wp-content-editor-tools",""]):b.push([N,E,"#wp-content-editor-tools",""])))}var M=p.concat(b,y);if(0===M.length)"draft"===i?lc.publishDraft():"publish"===i&&lc.publishPost();else{for(;M.length>0;)v.push(M.splice(0,10));n=v.length;for(var U=0;U<v.length;U++){var A=v[U];lc.sendChunk(A,i)}}}},sendChunk:function(i,n){t.ajax({type:"POST",dataType:"json",url:"/wp-admin/admin-ajax.php",data:{action:"check_for_broken_urls",allurls:i},timeout:9e4,success:function(t){s++,lc.getBustedUrls(t,n),l.removeClass("disabled")},error:function(t){console.log("Server Response Error"),lc.handleResponseError(),e=!1,s=0,l.removeClass("disabled")}})},stringToHTML:function(t){var e=document.createElement("div");return e.innerHTML=t,e},listPostType:function(t,e){return!t.children(e)[0].classList.contains("hidden_impt")},addClasses:function(){document.querySelector(".enable_button").checked&&t(".data_list_items").children(".postbox").each(function(e){t(this).removeClass("closed");var i=e;lc.listPostType(t(this),".type_standard_list_fields")?t(this).find(".type_standard_list_fields").each(function(){t(this).find("input[type='text']").each(function(e,s){2!==e&&4!==e&&6!==e||""!=t(this).val()&&(2===e&&t(this).addClass("list-post-title-url-"+i),4===e&&t(this).addClass("list-post-subtitle-url-"+i),6===e&&t(this).addClass("list-post-description-url-"+i))}),t(this).find(".wp-editor-wrap").addClass("list-post-desc-iframe-"+i),t(this).find(".media_video_field").each(function(e){var i=t(this).find("input");t(this).hasClass("hidden_impt")||i&&""!=i&&i.addClass("video-share-url")}),t(this).find(".link_items").find(".link_field").each(function(e,i){var s=e;t(this).find("input[type='text']").each(function(e,i){1===e&&""!=t(this).val()&&t(this).addClass("primary-list-post-link"+s)})}),t(this).find(".secondary_link_items").find(".link_field").each(function(e,i){var s=e;t(this).find("input[type='text']").each(function(e,i){1===e&&""!=t(this).val()&&t(this).addClass("secondary-list-post-link"+s)})})}):lc.listPostType(t(this),".type_playlist_list_fields")&&t(this).find(".type_playlist_list_fields").each(function(e,i){var s=e;t(this).find("input[type='text']").each(function(e,i){3!==e&&4!==e||""!=t(this).val()&&(3===e&&t(this).addClass("itunes-buy-list-post-"+s),4===e&&t(this).addClass("amazon-buy-list-post-"+s))})})})},getBustedUrls:function(t,e){if(i=i.concat(t.brokenUrls),s===n){if(s=0,"publish"===e){var o=t.superAdmin;lc.handleResponse(i,o,e)}else"draft"===e&&(c&&c.off("click",lc.draft),i.length>0&&lc.setDraftWarning("wp_draft_warning",i),lc.publishDraft());s=0}},handleResponseError:function(){t("#link-checker-spinner").remove(),alert("There was an issue with the response from the server and your content wasn't saved. Pleae try again in a few minutes.")},setDraftWarning:function(t,e){lc.setCookie(t,e,90)},scrollToError:function(e){e.preventDefault();var i=t(this).data("field");i.length?t("html, body").animate({scrollTop:t(i).offset().top-32},1e3):console.log("scroll data does NOT exist")},handleDraftWarning:function(s){lc.addClasses(),t(".status-banner").append('<div id="broken-link-error">\t\t\t\t\t<h3>\t\t\t\t\t\t<strong>Link Checker Warning:</strong>\t\t\t\t\t</h3>\t\t\t\t\t<p>The following broken links in this post came back as <em>"Unresponsive"</em>.\t\t\t\t\tClick on <b>"verify"</b> to check the links in a new tab and <b>"edit"</b> to scroll down to each broken link to adjust them.\t\t\t\t\t<b>Publishing live will be disabled</b> until these urls are resolved.</p>\t\t\t\t\t<div class="broken-urls">'+s.replace(/,/g,"<br />")+"</div>\t\t\t\t</div>"),i=[],e=!1,document.cookie="wp_draft_warning= ; expires = Thu, 01 Jan 1970 00:00:00 GMT ; path=/"},handleResponse:function(s,n,o){s.length>0?(t("#link-checker-spinner").remove(),alert("There were issues with the content. Please review the errors at top of this page."),t("#broken-link-error").remove(),t(".status-banner").append('<div id="broken-link-error">\t\t\t\t\t\t<h3>\t\t\t\t\t\t\t<strong>Link Checker Error:</strong>\t\t\t\t\t\t</h3>\t\t\t\t\t\tThe following broken links in this post came back as <em>"Unresponsive"</em>.\t\t\t\t\t\tClick on <b>"verify"</b> to check the links in a new tab and <b>"edit"</b> to scroll down to each broken link to adjust them.\t\t\t\t\t\t<b>Publishing live will be disabled</b> until these urls are resolved.\t\t\t\t\t\t<div class="broken-urls">'+s.join("<br/>")+"</div>\t\t\t\t\t</div>"),c.length>0?t("#broken-link-error").append('<b>Please Note:</b> Your changes have not been saved. Click the <b>"Save Draft"</b> button below to save draft or click the <b>"Publish Anyway"</b> button if you have verified the links and want to proceed with caution.<br />\t\t\t\t\t\t\t<div class="error-message-btns"><button id="save-draft-no-warning" class="button">Save Draft</button><button id="publish-anyway" class="button">Publish Anyway</button></div>'):t("#broken-link-error").append('<b>Please Note:</b> Your changes have not been updated. Click the <b>"Publish Anyway"</b> button if you have verified the links and want to proceed with caution.<br />\t\t\t\t\t\t\t<div class="error-message-btns"><button id="publish-anyway" class="button">Publish Anyway</button></div>'),t("html,body").animate({scrollTop:0},1e3),i=[],l.removeClass("disabled"),e=!1):lc.publishPost()},setCookie:function(t,e,i){var s=new Date;s.setTime(s.getTime()+1e3*i);var n="expires="+s.toUTCString(),o=e.join(",");document.cookie=t+"="+o+";"+n+"; path=/"},getCookie:function(t){for(var e=t+"=",i=document.cookie.split(";"),s=0;s<i.length;s++){for(var n=i[s];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},checkCookie:function(){var t=lc.getCookie("wp_draft_warning");""!=t&&lc.handleDraftWarning(t)}}},lc.init()}(jQuery);